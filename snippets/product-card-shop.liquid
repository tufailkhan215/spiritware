{% comment %}
  Product card for shop/collection grid.
  Design: image 3/4, badges (Best Seller, New, Limited), Quick View bar on hover, title, description line-clamp-1, price (compare_at strikethrough).
{% endcomment %}

{%- assign badge_label = nil -%}
{%- if product.tags contains 'best-seller' or product.tags contains 'Best Seller' -%}
  {%- assign badge_label = 'Best Seller' -%}
  {%- assign badge_class = 'shop-card__badge shop-card__badge--dark' -%}
{%- elsif product.tags contains 'new' or product.tags contains 'New' -%}
  {%- assign badge_label = 'New' -%}
  {%- assign badge_class = 'shop-card__badge shop-card__badge--gold' -%}
{%- elsif product.tags contains 'limited' or product.tags contains 'Limited' -%}
  {%- assign badge_label = 'Limited' -%}
  {%- assign badge_class = 'shop-card__badge shop-card__badge--dark' -%}
{%- endif -%}

<a href="{{ product.url }}" class="shop-card group block">
  <div class="shop-card__image-wrap relative overflow-hidden mb-4 bg-[#EDE8E0]">
    <div class="shop-card__aspect aspect-[3/4]">
      {% if product.featured_image != blank %}
        <img
          alt="{{ product.featured_image.alt | default: product.title | escape }}"
          class="shop-card__img w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
          src="{{ product.featured_image | image_url: width: 600 }}"
          width="600"
          height="800"
          loading="lazy"
        >
      {% else %}
        <div class="shop-card__placeholder w-full h-full flex items-center justify-center text-[#1A1A1A]/40">
          {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
      {% endif %}
    </div>
    {% if badge_label != blank %}
      <div class="shop-card__badges absolute top-4 left-4 flex flex-col gap-2">
        <span class="{{ badge_class }} px-3 py-1 text-[#FAF7F2] text-xs font-sans tracking-wider uppercase">{{ badge_label }}</span>
      </div>
    {% endif %}
    <div class="shop-card__quick-view absolute inset-x-0 bottom-0 p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-500">
      <span class="block w-full py-3 bg-[#1A1A1A] text-[#FAF7F2] text-center font-sans text-xs tracking-widest uppercase">Quick View</span>
    </div>
  </div>
  <div class="shop-card__info">
    <h3 class="shop-card__title font-serif text-lg text-[#1A1A1A] mb-1 group-hover:text-[#C4A77D] transition-colors duration-300">{{ product.title }}</h3>
    <p class="shop-card__desc font-sans text-sm text-[#1A1A1A]/60 mb-2 line-clamp-1">
      {% if product.description != blank %}
        {{ product.description | strip_html | truncatewords: 15 }}
      {% else %}
        {{ product.title }}
      {% endif %}
    </p>
    <div class="shop-card__price flex items-center gap-2">
      <span class="font-sans text-sm text-[#1A1A1A] font-medium">{{ product.price | money }}</span>
      {% if product.compare_at_price > product.price %}
        <span class="font-sans text-sm text-[#1A1A1A]/40 line-through">{{ product.compare_at_price | money }}</span>
      {% endif %}
    </div>
  </div>
</a>
