{% comment %}
  Scoped for use in .featured-products-section, .collection-products, .home-showcase-section.
  Do not let .product-page CSS override these styles.
{% endcomment %}
<article class="product-card">
  <a href="{{ product.url }}" class="product-card__link">
    <div class="product-card__image-wrapper">
      {% if product.featured_media %}
        <img
          src="{{ product.featured_media | image_url: width: 600 }}"
          alt="{{ product.featured_media.alt | default: product.title | escape }}"
          width="600"
          loading="lazy"
          class="product-card__image"
        />
      {% else %}
        {{ 'product-1' | placeholder_svg_tag: 'product-card__image placeholder-svg' }}
      {% endif %}
      <div class="product-card__badges">
        {% if product.compare_at_price > product.price %}
          <span class="product-card__badge product-card__badge--sale">{{ 'products.product.on_sale' | t }}</span>
        {% endif %}
        {% if product.tags contains 'Best Seller' or product.tags contains 'best-seller' %}
          <span class="product-card__badge product-card__badge--bestseller">{{ 'products.product.best_seller' | t }}</span>
        {% endif %}
        {% if product.tags contains 'New' or product.tags contains 'new' %}
          <span class="product-card__badge product-card__badge--new">{{ 'products.product.new' | t }}</span>
        {% endif %}
        {% if product.tags contains 'Popular' or product.tags contains 'popular' %}
          <span class="product-card__badge product-card__badge--popular">{{ 'products.product.popular' | t }}</span>
        {% endif %}
      </div>
    </div>
    <div class="product-card__info">
      {% if product.collections.first %}
        <span class="product-card__category">{{ product.collections.first.title }}</span>
      {% endif %}
      <h3 class="product-card__title">{{ product.title }}</h3>
      <div class="product-card__price">
        <span class="price {% if product.compare_at_price > product.price %}price--sale{% endif %}">
          {{ product.price | money }}
        </span>
        {% if product.compare_at_price > product.price %}
          <span class="price__compare">{{ product.compare_at_price | money }}</span>
        {% endif %}
      </div>
    </div>
  </a>
  <form action="{{ routes.cart_add_url }}" method="post" class="product-card__form" data-product-card-form>
    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
    <input type="hidden" name="quantity" value="1">
    <button type="submit" name="add" class="button button--primary button--small product-card__add" {% unless product.available %}disabled{% endunless %}>
      {% if product.available %}{{ 'products.product.add_to_cart' | t }}{% else %}{{ 'products.product.sold_out' | t }}{% endif %}
    </button>
  </form>
</article>
