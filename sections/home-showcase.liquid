{% schema %}
{
  "name": "Home Showcase",
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "Label",
      "default": "CA89 Home"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Modern Mountain Living"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Thoughtfully curated home decor and lifestyle goods for your mountain retreat. Furniture, art, and accessories inspired by Sierra living."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Explore CA89 Home"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Category Cards"
    },
    {
      "type": "collection",
      "id": "category_collection_1",
      "label": "Category 1 Collection"
    },
    {
      "type": "text",
      "id": "category_title_1",
      "label": "Category 1 Title",
      "default": "Furniture"
    },
    {
      "type": "image_picker",
      "id": "category_image_1",
      "label": "Category 1 Image"
    },
    {
      "type": "url",
      "id": "category_link_1",
      "label": "Category 1 Link"
    },
    {
      "type": "collection",
      "id": "category_collection_2",
      "label": "Category 2 Collection"
    },
    {
      "type": "text",
      "id": "category_title_2",
      "label": "Category 2 Title",
      "default": "Art & Wall Decor"
    },
    {
      "type": "image_picker",
      "id": "category_image_2",
      "label": "Category 2 Image"
    },
    {
      "type": "url",
      "id": "category_link_2",
      "label": "Category 2 Link"
    },
    {
      "type": "collection",
      "id": "category_collection_3",
      "label": "Category 3 Collection"
    },
    {
      "type": "text",
      "id": "category_title_3",
      "label": "Category 3 Title",
      "default": "Vases & Bowls"
    },
    {
      "type": "image_picker",
      "id": "category_image_3",
      "label": "Category 3 Image"
    },
    {
      "type": "url",
      "id": "category_link_3",
      "label": "Category 3 Link"
    },
    {
      "type": "header",
      "content": "Featured Products"
    },
    {
      "type": "collection",
      "id": "products_collection",
      "label": "Products Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "label": "Number of products to show",
      "min": 4,
      "max": 12,
      "step": 4,
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "text",
          "id": "badge_text",
          "label": "Badge Text",
          "info": "Leave empty to hide badge"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Home Showcase"
    }
  ]
}
{% endschema %}

<section class="home-showcase-section">
  <div class="home-showcase-container">
    <!-- Header Section -->
    <div class="home-showcase-header">
      <div class="home-showcase-header-content">
        <div class="home-showcase-label-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="home-showcase-icon" aria-hidden="true">
            <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path>
            <path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          </svg>
          {%- if section.settings.label != blank -%}
            <span class="home-showcase-label">{{ section.settings.label }}</span>
          {%- endif -%}
        </div>
        {%- if section.settings.heading != blank -%}
          <h2 class="home-showcase-heading">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.description != blank -%}
          <p class="home-showcase-description">{{ section.settings.description }}</p>
        {%- endif -%}
      </div>
      {%- if section.settings.button_text != blank -%}
        <a href="{{ section.settings.button_link | default: '#' }}" class="home-showcase-header-button">
          {{ section.settings.button_text }}
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="home-showcase-arrow" aria-hidden="true">
            <path d="M5 12h14"></path>
            <path d="m12 5 7 7-7 7"></path>
          </svg>
        </a>
      {%- endif -%}
    </div>

    <!-- Category Cards Grid -->
    <div class="home-showcase-categories">
      {%- for i in (1..3) -%}
        {%- assign category_title_key = 'category_title_' | append: i -%}
        {%- assign category_image_key = 'category_image_' | append: i -%}
        {%- assign category_link_key = 'category_link_' | append: i -%}
        {%- assign category_collection_key = 'category_collection_' | append: i -%}
        
        {%- assign category_title = section.settings[category_title_key] -%}
        {%- assign category_image = section.settings[category_image_key] -%}
        {%- assign category_link = section.settings[category_link_key] -%}
        {%- assign category_collection = section.settings[category_collection_key] -%}
        
        {%- if category_title != blank or category_image != blank -%}
          <a href="{{ category_link | default: '#' }}" class="home-showcase-category-card">
            {%- if category_image != blank -%}
              <div class="home-showcase-category-image" style="background-image: url('{{ category_image | image_url: width: 1200 }}');"></div>
            {%- else -%}
              <div class="home-showcase-category-image home-showcase-category-placeholder">
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
              </div>
            {%- endif -%}
            <div class="home-showcase-category-overlay"></div>
            <div class="home-showcase-category-content">
              {%- if category_collection != blank -%}
                {%- assign collection = collections[category_collection] -%}
                {%- if collection != blank -%}
                  <span class="home-showcase-category-count">{{ collection.products_count }} Products</span>
                {%- endif -%}
              {%- endif -%}
              {%- if category_title != blank -%}
                <h3 class="home-showcase-category-title">{{ category_title }}</h3>
              {%- endif -%}
              <span class="home-showcase-category-cta">
                Shop Now
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="home-showcase-category-arrow" aria-hidden="true">
                  <path d="M5 12h14"></path>
                  <path d="m12 5 7 7-7 7"></path>
                </svg>
              </span>
            </div>
          </a>
        {%- endif -%}
      {%- endfor -%}
    </div>

    <!-- Featured Products Grid -->
    {%- if section.blocks.size > 0 or section.settings.products_collection != blank -%}
      <div class="home-showcase-products">
        {%- if section.blocks.size > 0 -%}
          {%- for block in section.blocks -%}
            {%- if block.settings.product != blank -%}
              {%- assign product = all_products[block.settings.product] -%}
              {%- if product != blank -%}
                <a href="{{ product.url }}" class="home-showcase-product-card" {{ block.shopify_attributes }}>
                  <div class="home-showcase-product-image-wrapper">
                    {%- if product.featured_image != blank -%}
                      <img 
                        src="{{ product.featured_image | image_url: width: 600 }}" 
                        alt="{{ product.title }}" 
                        class="home-showcase-product-image"
                        loading="lazy"
                      >
                    {%- else -%}
                      <div class="home-showcase-product-placeholder">
                        {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
                      </div>
                    {%- endif -%}
                    {%- if block.settings.badge_text != blank -%}
                      <span class="home-showcase-product-badge">{{ block.settings.badge_text }}</span>
                    {%- endif -%}
                  </div>
                  <div class="home-showcase-product-info">
                    <h4 class="home-showcase-product-title">{{ product.title }}</h4>
                    <p class="home-showcase-product-price">{{ product.price | money }}</p>
                  </div>
                </a>
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}
        {%- elsif section.settings.products_collection != blank -%}
          {%- assign collection = collections[section.settings.products_collection] -%}
          {%- if collection != blank -%}
            {%- assign products_limit = section.settings.products_to_show | default: 4 -%}
            {%- for product in collection.products limit: products_limit -%}
              <a href="{{ product.url }}" class="home-showcase-product-card">
                <div class="home-showcase-product-image-wrapper">
                  {%- if product.featured_image != blank -%}
                    <img 
                      src="{{ product.featured_image | image_url: width: 600 }}" 
                      alt="{{ product.title }}" 
                      class="home-showcase-product-image"
                      loading="lazy"
                    >
                  {%- else -%}
                    <div class="home-showcase-product-placeholder">
                      {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
                    </div>
                  {%- endif -%}
                </div>
                <div class="home-showcase-product-info">
                  <h4 class="home-showcase-product-title">{{ product.title }}</h4>
                  <p class="home-showcase-product-price">{{ product.price | money }}</p>
                </div>
              </a>
            {%- endfor -%}
          {%- endif -%}
        {%- endif -%}
      </div>
    {%- endif -%}
  </div>
</section>
