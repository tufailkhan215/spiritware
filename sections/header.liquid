{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "promo_text",
      "label": "Promotional Bar Text",
      "default": "Free shipping on orders over $75 | Shop our 3 locations in Truckee & Tahoe City"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo Text",
      "default": "CALIFORNIA 89"
    },
    {
      "type": "text",
      "id": "logo_subtitle",
      "label": "Logo Subtitle",
      "default": "TRUCKEE â€¢ LAKE TAHOE"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "Enable sticky/fixed header",
      "default": true,
      "info": "When enabled, the header will remain fixed at the top when scrolling"
    }
  ]
}
{% endschema %}

<div class="header-container{% if section.settings.sticky_header %} header-sticky{% endif %}">
  {%- if section.settings.promo_text != blank -%}
  <div class="promo-bar">
    {{ section.settings.promo_text }}
  </div>
  {%- endif -%}

  <header class="header" id="header">
  <div class="header-wrapper">
    <button class="mobile-menu-toggle" aria-label="Toggle menu">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <a href="{{ routes.root_url }}" class="logo">
      {%- if section.settings.logo != blank -%}
        <img src="{{ section.settings.logo | image_url: width: 200 }}" alt="{{ section.settings.logo_text }}" loading="eager">
      {%- else -%}
        {{ section.settings.logo_text }}
      {%- endif -%}
      {%- if section.settings.logo_subtitle != blank -%}
        <span class="logo-subtitle">{{ section.settings.logo_subtitle }}</span>
      {%- endif -%}
    </a>

    <nav class="nav-menu">
      {%- for link in linklists[section.settings.menu].links -%}
        <a href="{{ link.url }}" class="{% if link.active %}active{% endif %}">
          {{ link.title | upcase }}
        </a>
      {%- endfor -%}
    </nav>

    <div class="header-actions">
      <button class="search-toggle header-icon" aria-label="Search">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>

      <a href="{{ routes.account_login_url }}" class="header-icon" aria-label="Account">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </a>

      <button class="cart-toggle cart-badge header-icon" aria-label="Cart">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
        <span class="cart-count" style="display: none;">0</span>
      </button>
    </div>
  </div>

  {%- render 'mobile-menu', menu: section.settings.menu -%}
  {%- render 'search-bar' -%}
  </header>
</div>

<div class="cart-drawer-overlay"></div>
{%- render 'cart-drawer' -%}
