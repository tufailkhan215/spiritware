{% comment %}
  Shop Homepage â€” Collection section: subheading, heading, View All link, product grid.
  Product cards: 3:4 image, optional badge, Quick Add on hover, title, description, price.
  Generic: works with any header. Design: #FAF7F2, #1A1A1A, #C4A77D, #EDE8E0.
{% endcomment %}

{%- assign collection = section.settings.collection -%}
{%- if collection != blank -%}
<section class="shop-homepage" id="{{ section.settings.section_id | default: 'shop' }}" aria-label="Shop">
  <div class="shop-homepage__container">
    <div class="shop-homepage__header">
      <div class="shop-homepage__header-left">
        {%- if section.settings.subheading != blank -%}
          <span class="shop-homepage__subheading">{{ section.settings.subheading | escape }}</span>
        {%- endif -%}
        {%- if section.settings.heading != blank -%}
          <h2 class="shop-homepage__heading">{{ section.settings.heading | escape }}</h2>
        {%- endif -%}
      </div>
      {%- if section.settings.view_all_text != blank -%}
        <a href="{{ section.settings.view_all_link | default: collection.url }}" class="shop-homepage__view-all">
          {{ section.settings.view_all_text | escape }}
          <svg class="shop-homepage__view-all-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        </a>
      {%- endif -%}
    </div>

    <div class="shop-homepage__grid">
      {%- for product in collection.products limit: section.settings.products_to_show -%}
        <article class="shop-homepage__card">
          <div class="shop-homepage__card-image-wrap">
            <a href="{{ product.url }}" class="shop-homepage__card-image-link" aria-label="{{ product.title | escape }}">
              <div class="shop-homepage__card-aspect">
                {%- if product.featured_image != blank -%}
                  <img
                    class="shop-homepage__card-image"
                    src="{{ product.featured_image | image_url: width: 600 }}"
                    alt="{{ product.featured_image.alt | default: product.title | escape }}"
                    width="600"
                    height="800"
                    loading="lazy"
                  >
                {%- else -%}
                  <div class="shop-homepage__card-placeholder"></div>
                {%- endif -%}
              </div>
            </a>
            {%- if product.tags contains 'best-seller' -%}
              <span class="shop-homepage__card-badge">Best Seller</span>
            {%- elsif product.tags contains 'new' -%}
              <span class="shop-homepage__card-badge">New</span>
            {%- elsif product.tags contains 'limited' -%}
              <span class="shop-homepage__card-badge">Limited</span>
            {%- elsif product.compare_at_price > product.price -%}
              <span class="shop-homepage__card-badge">Sale</span>
            {%- endif -%}
            <div class="shop-homepage__card-quick-add-wrap">
              <a href="{{ product.url }}" class="shop-homepage__card-quick-add">Quick Add</a>
            </div>
          </div>
          <a href="{{ product.url }}" class="shop-homepage__card-body-link">
            <div class="shop-homepage__card-body">
              <h3 class="shop-homepage__card-title">{{ product.title | escape }}</h3>
              {%- if product.description != blank -%}
                <p class="shop-homepage__card-desc">{{ product.description | strip_html | truncatewords: 20 }}</p>
              {%- endif -%}
              <p class="shop-homepage__card-price">{{ product.price | money }}</p>
            </div>
          </a>
        </article>
      {%- endfor -%}
    </div>
  </div>
</section>
{%- endif -%}

{% schema %}
{
  "name": "Shop Homepage",
  "tag": "section",
  "class": "section-shop-homepage",
  "settings": [
    {
      "type": "text",
      "id": "section_id",
      "label": "Section ID (for anchor links)",
      "default": "shop",
      "info": "Use 'shop' to link with #shop from navigation."
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "The Collection"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Wearable Prayers"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "label": "Products to show",
      "min": 2,
      "max": 8,
      "step": 1,
      "default": 4
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View All link text",
      "default": "View All"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View All link (optional)",
      "info": "Leave blank to use the collection URL."
    }
  ],
  "presets": [
    {
      "name": "Shop Homepage"
    }
  ]
}
{% endschema %}
