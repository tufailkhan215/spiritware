{% comment %}
  Blog listing template (liquid fallback).
  Matches "All Articles" design: grid of cards with category, title, excerpt, author, read time.
  For section-based blog page, use the "blog" template (blog.json) in Theme settings.
{% endcomment %}

{% paginate blog.articles by 12 %}
<section class="blog-listing-section pb-24 px-6 lg:px-12" aria-label="{{ blog.title }}">
  <div class="blog-listing-section__inner max-w-7xl mx-auto">
    <h2 class="blog-listing-section__title font-serif text-2xl text-[#1A1A1A] mb-12">
      {{ blog.title | default: 'All Articles' }}
    </h2>

    {% if paginate.articles.size > 0 %}
      <div class="blog-listing-section__grid grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for article in paginate.articles %}
          <article class="blog-listing-card">
            <a href="{{ article.url }}" class="blog-listing-card__link group block">
              <div class="blog-listing-card__image-wrap relative overflow-hidden mb-5 bg-[#EDE8E0]">
                <div class="blog-listing-card__aspect">
                  {% if article.image != blank %}
                    <img
                      alt="{{ article.image.alt | default: article.title | escape }}"
                      class="blog-listing-card__img w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                      src="{{ article.image | image_url: width: 800 }}"
                      width="800"
                      height="533"
                      loading="lazy"
                    >
                  {% else %}
                    <div class="blog-listing-card__placeholder w-full h-full flex items-center justify-center text-[#1A1A1A]/40">
                      {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                    </div>
                  {% endif %}
                </div>
              </div>
              {% if article.tags.size > 0 %}
                <span class="blog-listing-card__category font-sans text-xs tracking-[0.2em] uppercase text-[#C4A77D] mb-2 block">{{ article.tags.first }}</span>
              {% endif %}
              <h3 class="blog-listing-card__title font-serif text-xl text-[#1A1A1A] mb-3 group-hover:text-[#C4A77D] transition-colors">{{ article.title }}</h3>
              <p class="blog-listing-card__excerpt font-sans text-sm text-[#1A1A1A]/60 mb-4 line-clamp-2">
                {% if article.excerpt != blank %}
                  {{ article.excerpt | strip_html | truncatewords: 25 }}
                {% else %}
                  {{ article.content | strip_html | truncatewords: 25 }}
                {% endif %}
              </p>
              <div class="blog-listing-card__meta flex items-center gap-3 text-xs text-[#1A1A1A]/50">
                <span class="font-sans">{{ article.author | default: 'Sacred Rebel Team' }}</span>
                <span aria-hidden="true">â€¢</span>
                <span class="font-sans">
                  {% assign words = article.content | strip_html | split: ' ' | size %}
                  {% assign mins = words | divided_by: 180 %}
                  {% if mins < 1 %}1 min read{% else %}{{ mins }} min read{% endif %}
                </span>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>

      {% if paginate.pages > 1 %}
        <nav class="blog-listing-section__pagination mt-12 flex justify-center items-center gap-4" aria-label="Blog pagination">
          {% if paginate.previous %}
            <a href="{{ paginate.previous.url }}" class="blog-listing-section__pagination-link">Previous</a>
          {% endif %}
          <span class="blog-listing-section__pagination-info text-sm text-[#1A1A1A]/60">
            Page {{ paginate.current_page }} of {{ paginate.pages }}
          </span>
          {% if paginate.next %}
            <a href="{{ paginate.next.url }}" class="blog-listing-section__pagination-link">Next</a>
          {% endif %}
        </nav>
      {% endif %}
    {% else %}
      <p class="blog-listing-section__empty text-[#1A1A1A]/60">No articles in this blog yet.</p>
    {% endif %}
  </div>
</section>
{% endpaginate %}
