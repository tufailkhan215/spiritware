{% comment %}
  Blog Listing Template
  Shows blog posts in a grid layout
{% endcomment %}

{% paginate blog.articles by 12 %}
<div class="blog-listing-page">
  <div class="blog-listing-container">
    {%- if blog.title != blank -%}
      <header class="blog-header">
        <h1 class="blog-title">{{ blog.title }}</h1>
        {%- if blog.description != blank -%}
          <p class="blog-description">{{ blog.description }}</p>
        {%- endif -%}
      </header>
    {%- endif -%}

    {%- if paginate.articles.size > 0 -%}
      <div class="blog-posts-grid">
        {%- for article in paginate.articles -%}
          <article class="blog-post-card">
            {%- if article.image != blank -%}
              <div class="blog-post-image-wrapper">
                <a href="{{ article.url }}">
                  <img 
                    src="{{ article.image | image_url: width: 800 }}" 
                    alt="{{ article.image.alt | escape }}"
                    class="blog-post-image"
                    loading="lazy"
                  >
                </a>
                <div class="blog-post-date-overlay">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="blog-post-calendar-icon">
                    <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                  <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">
                    {{ article.published_at | date: '%b %d, %Y' }}
                  </time>
                </div>
              </div>
            {%- endif -%}
            
            <div class="blog-post-content">
              {%- if article.tags.size > 0 -%}
                <div class="blog-post-tags">
                  {%- for tag in article.tags limit: 3 -%}
                    <span class="blog-post-tag">{{ tag }}</span>
                  {%- endfor -%}
                </div>
              {%- endif -%}
              
              <h2 class="blog-post-title">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h2>
              
              {%- if article.excerpt != blank -%}
                <p class="blog-post-excerpt">{{ article.excerpt | strip_html | truncatewords: 30 }}</p>
              {%- elsif article.content != blank -%}
                <p class="blog-post-excerpt">{{ article.content | strip_html | truncatewords: 30 }}</p>
              {%- endif -%}
              
              <a href="{{ article.url }}" class="blog-post-read-more">
                Read More
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="blog-post-read-more-arrow">
                  <path d="M5 12h14"></path>
                  <path d="m12 5 7 7-7 7"></path>
                </svg>
              </a>
            </div>
          </article>
        {%- endfor -%}
      </div>

      {%- if paginate.pages > 1 -%}
        <div class="blog-pagination">
          {%- if paginate.previous -%}
            <a href="{{ paginate.previous.url }}" class="pagination-link pagination-prev">
              ← Previous
            </a>
          {%- endif -%}
          
          <span class="pagination-info">
            Page {{ paginate.current_page }} of {{ paginate.pages }}
          </span>
          
          {%- if paginate.next -%}
            <a href="{{ paginate.next.url }}" class="pagination-link pagination-next">
              Next →
            </a>
          {%- endif -%}
        </div>
      {%- endif -%}
    {%- else -%}
      <div class="blog-empty">
        <p>No articles found in this blog.</p>
      </div>
    {%- endif -%}
  </div>
</div>
{% endpaginate %}