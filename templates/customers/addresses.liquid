{% comment %}
  Customer Addresses Template
{% endcomment %}

<div class="customer-addresses-page">
  <div class="customer-addresses-container">
    <h1 class="customer-page-title">Addresses</h1>
    
    <div class="customer-account-nav">
      <a href="{{ routes.account_url }}" class="account-nav-link">Orders</a>
      <a href="{{ routes.account_addresses_url }}" class="account-nav-link active">Addresses</a>
      <a href="{{ routes.account_logout_url }}" class="account-nav-link">Logout</a>
    </div>
    
    <div class="customer-addresses-content">
      <button type="button" class="btn btn-primary" id="AddNewAddress">Add New Address</button>
      
      <div class="customer-addresses-grid">
        {% for address in customer.addresses %}
          <div class="customer-address-card" data-address-id="{{ address.id }}">
            {% if address == customer.default_address %}
              <div class="address-default-badge">Default</div>
            {% endif %}
            
            <div class="address-content">
              {{ address | format_address }}
            </div>
            
            <div class="address-actions">
              <button type="button" class="btn btn-outline edit-address" data-address-id="{{ address.id }}">Edit</button>
              <form method="post" action="{{ address.url }}" class="address-delete-form">
                <input type="hidden" name="_method" value="delete">
                <button type="submit" class="btn btn-outline btn-danger">Delete</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
      
      {% form 'customer_address', customer.new_address, class: 'address-form', id: 'AddressNewForm', style: 'display: none;' %}
        <h3 class="address-form-title">Add New Address</h3>
        
        <div class="form-group">
          <label for="AddressFirstNameNew" class="form-label">First Name</label>
          <input type="text" name="address[first_name]" id="AddressFirstNameNew" class="form-input" value="{{ form.first_name }}" autocomplete="given-name">
        </div>
        
        <div class="form-group">
          <label for="AddressLastNameNew" class="form-label">Last Name</label>
          <input type="text" name="address[last_name]" id="AddressLastNameNew" class="form-input" value="{{ form.last_name }}" autocomplete="family-name">
        </div>
        
        <div class="form-group">
          <label for="AddressCompanyNew" class="form-label">Company</label>
          <input type="text" name="address[company]" id="AddressCompanyNew" class="form-input" value="{{ form.company }}" autocomplete="organization">
        </div>
        
        <div class="form-group">
          <label for="AddressAddress1New" class="form-label">Address</label>
          <input type="text" name="address[address1]" id="AddressAddress1New" class="form-input" value="{{ form.address1 }}" autocomplete="street-address address-line1">
        </div>
        
        <div class="form-group">
          <label for="AddressAddress2New" class="form-label">Apartment, suite, etc.</label>
          <input type="text" name="address[address2]" id="AddressAddress2New" class="form-input" value="{{ form.address2 }}" autocomplete="street-address address-line2">
        </div>
        
        <div class="form-group">
          <label for="AddressCityNew" class="form-label">City</label>
          <input type="text" name="address[city]" id="AddressCityNew" class="form-input" value="{{ form.city }}" autocomplete="address-level2">
        </div>
        
        <div class="form-group">
          <label for="AddressCountryNew" class="form-label">Country</label>
          <select name="address[country]" id="AddressCountryNew" class="form-select" data-default="{{ form.country }}" autocomplete="country"></select>
        </div>
        
        <div class="form-group" id="AddressProvinceContainerNew" style="display: none;">
          <label for="AddressProvinceNew" class="form-label">Province</label>
          <select name="address[province]" id="AddressProvinceNew" class="form-select" data-default="{{ form.province }}" autocomplete="address-level1"></select>
        </div>
        
        <div class="form-group">
          <label for="AddressZipNew" class="form-label">Postal Code</label>
          <input type="text" name="address[zip]" id="AddressZipNew" class="form-input" value="{{ form.zip }}" autocomplete="postal-code">
        </div>
        
        <div class="form-group">
          <label for="AddressPhoneNew" class="form-label">Phone</label>
          <input type="tel" name="address[phone]" id="AddressPhoneNew" class="form-input" value="{{ form.phone }}" autocomplete="tel">
        </div>
        
        <div class="form-group form-group-checkbox">
          <label for="AddressDefaultAddressNew" class="form-checkbox-label">
            <input type="checkbox" name="address[default]" id="AddressDefaultAddressNew" value="1" class="form-checkbox">
            <span>Set as default address</span>
          </label>
        </div>
        
        <div class="address-form-actions">
          <button type="submit" class="btn btn-primary">Add Address</button>
          <button type="button" class="btn btn-outline" id="CancelNewAddress">Cancel</button>
        </div>
      {% endform %}
    </div>
  </div>
</div>

<script>
  // Address form toggle
  document.addEventListener('DOMContentLoaded', function() {
    const addNewAddressBtn = document.getElementById('AddNewAddress');
    const addressForm = document.getElementById('AddressNewForm');
    const cancelBtn = document.getElementById('CancelNewAddress');
    
    if (addNewAddressBtn && addressForm) {
      addNewAddressBtn.addEventListener('click', function() {
        addressForm.style.display = 'block';
        addNewAddressBtn.style.display = 'none';
      });
      
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          addressForm.style.display = 'none';
          addNewAddressBtn.style.display = 'block';
          addressForm.reset();
        });
      }
    }
  });
</script>
