<div class="customer-page page-width" style="padding: 4rem 0;">
  <p><a href="{{ routes.account_url }}">{{ 'customer.account.return' | t }}</a></p>

  <h1 class="customer-page__title">{{ 'customer.order.title' | t: name: order.name }}</h1>
  <p>{{ 'customer.order.date' | t: date: order.created_at | date: format: 'date' }}</p>

  {% if order.cancelled %}
    <div class="form-message form-message--error" style="margin: 1rem 0;">
      {{ 'customer.order.cancelled' | t }} {{ order.cancelled_at | date: format: 'date' }}
      {{ order.cancel_reason }}
    </div>
  {% endif %}

  <table class="customer-table" style="width: 100%; border-collapse: collapse; margin: 2rem 0;">
    <thead>
      <tr>
        <th scope="col">{{ 'customer.order.product' | t }}</th>
        <th scope="col">{{ 'customer.order.sku' | t }}</th>
        <th scope="col">{{ 'customer.order.quantity' | t }}</th>
        <th scope="col">{{ 'customer.order.total' | t }}</th>
      </tr>
    </thead>
    <tbody>
      {% for line_item in order.line_items %}
        <tr>
          <td>
            {{ line_item.title }}
            {% if line_item.quantity > 1 %}
              <span class="customer-order__quantity">× {{ line_item.quantity }}</span>
            {% endif %}
          </td>
          <td>{{ line_item.sku | default: '—' }}</td>
          <td>{{ line_item.quantity }}</td>
          <td>{{ line_item.final_line_price | money }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="customer-order__totals" style="text-align: right; margin-top: 2rem;">
    <p><strong>{{ 'customer.order.subtotal' | t }}:</strong> {{ order.line_items_subtotal_price | money }}</p>
    {% for discount in order.discounts %}
      <p>{{ discount.code }}: -{{ discount.savings | money }}</p>
    {% endfor %}
    {% for shipping_method in order.shipping_methods %}
      <p>{{ shipping_method.title }}: {{ shipping_method.price | money }}</p>
    {% endfor %}
    {% for tax_line in order.tax_lines %}
      <p>{{ tax_line.title }}: {{ tax_line.price | money }}</p>
    {% endfor %}
    <p><strong>{{ 'customer.order.total' | t }}:</strong> {{ order.total_price | money }}</p>
  </div>

  <div class="customer-order__addresses" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 3rem;">
    <div>
      <h3>{{ 'customer.order.billing_address' | t }}</h3>
      {{ order.billing_address | format_address }}
    </div>
    <div>
      <h3>{{ 'customer.order.shipping_address' | t }}</h3>
      {{ order.shipping_address | format_address }}
    </div>
  </div>
</div>
