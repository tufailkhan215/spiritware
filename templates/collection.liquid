{% section 'collection-banner' %}
{% section 'collection-filters' %}

{% paginate collection.products by 24 %}
  <div class="collection-page page-width" style="padding: 2rem 0;">
    <div class="collection-layout" style="display: grid; grid-template-columns: 1fr; gap: 2rem;">
      <aside class="collection-sidebar" style="display: none;" data-filter-sidebar>
        {% render 'filter-sidebar', collection: collection %}
      </aside>
      <div class="collection-main">
        <div class="collection-toolbar" style="display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 1rem; margin-bottom: 1.5rem;">
          <button type="button" class="filter-toggle button button--outline" data-filter-toggle aria-expanded="false">
            {{ 'collections.general.filter' | t }}
          </button>
          <span class="collection-product-count">{{ 'collections.general.items_with_count' | t: count: collection.products_count }}</span>
          <div class="collection-toolbar__right" style="display: flex; align-items: center; gap: 1rem;">
            <label for="SortBy" class="visually-hidden">{{ 'collections.sorting.title' | t }}</label>
            <select id="SortBy" name="sort_by" class="collection-sort-select" aria-label="{{ 'collections.sorting.title' | t }}">
              {% for option in collection.sort_options %}
                <option value="{{ option.value }}" {% if collection.sort_by == option.value %}selected{% endif %}>
                  {{ option.name }}
                </option>
              {% endfor %}
            </select>
            <div class="view-toggle" role="group" aria-label="{{ 'collections.general.view' | t }}">
              <button type="button" class="view-toggle__btn view-toggle__grid active" data-view="grid" aria-pressed="true">Grid</button>
              <button type="button" class="view-toggle__btn view-toggle__list" data-view="list" aria-pressed="false">List</button>
            </div>
          </div>
        </div>

        <div class="collection-products collection-products--grid" data-collection-products style="display: grid; gap: 1.5rem; grid-template-columns: repeat(2, 1fr);">
          {% for product in collection.products %}
            <div class="collection-products__item">
              {% render 'product-card', product: product %}
            </div>
          {% else %}
            <p class="collection-empty" style="grid-column: 1 / -1;">{{ 'collections.general.no_matches' | t }}</p>
          {% endfor %}
        </div>

        {% if paginate.pages > 1 %}
          {% render 'pagination', paginate: paginate %}
        {% endif %}
      </div>
    </div>
  </div>
{% endpaginate %}
